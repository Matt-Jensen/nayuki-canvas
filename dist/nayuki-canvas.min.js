!function(){"use strict";function t(){var t=arguments.length<=0||void 0===arguments[0]?this.nodes:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.idealNumNodes:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.relWidth:arguments[2],r=arguments.length<=3||void 0===arguments[3]?this.relHeight:arguments[3],i=[];t.map(function(t){t.opacity>0&&i.push(t)});for(var o=i.length;e>o;o++)i.push({posX:Math.random()*n,posY:Math.random()*r,radius:.015*(Math.pow(Math.random(),5)+.35),velX:0,velY:0,opacity:0});return i}function e(t){for(var e={parents:{value:[]},ranks:{value:[],writable:!0}},n=0;t>n;n++)e.parents.value.push(n),e.ranks.value.push(0);return Object.create(A,e)}function n(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.nodeA===e.nodeA&&r.nodeB===e.nodeB,o=r.nodeA===e.nodeB&&r.nodeB===e.nodeA;if(i||o)return!0}return!1}function r(t,n){for(var r=[],i=e(n.length),o=0;o<t.length&&r.length<n.length-1;o++){var a=t[o],s=N(a,3),u=s[1],d=s[2];i.mergeSets(u,d)&&r.push({nodeA:n[u],nodeB:n[d]})}return r}function i(t,e){for(var n=[],r=0;r<t.length;r++)for(var i=t[r],o=0;r>o;o++){var a=t[o],s=Math.hypot(i.posX-a.posX,i.posY-a.posY);s/=Math.pow(i.radius*a.radius,e),n.push([s,r,o])}return n.sort(function(t,e){var n=N(t,1),r=n[0],i=N(e,1),o=i[0];return o>r?-1:r>o?1:0})}function o(t){return JSON.parse(JSON.stringify(t))}function a(){var t="object"===("undefined"==typeof document?"undefined":x(document))&&document.createElement&&document.createElement("canvas");return!!(t&&t.getContext&&t.getContext("2d"))}function s(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=function(t){return String.prototype.toLowerCase.call(t)},n="object"===("undefined"==typeof window?"undefined":x(window))?window.jQuery||window.$:this&&this.jQuery;try{n&&t instanceof n&&"function"==typeof t.get&&(t=t.get(0))}catch(r){}try{return t instanceof HTMLElement==!0&&"canvas"===e(t.nodeName)?t:new Error("is not a canvas")}catch(r){return new Error("HTMLElements not supported")}}function u(t){return t.opacity>0&&t.nodeA.opacity>0&&t.nodeB.opacity>0}function d(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return function(){return t.length<e.length-1+n}}function h(){for(var t=arguments.length<=0||void 0===arguments[0]?this.nodes:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.edges:arguments[1],o=arguments.length<=2||void 0===arguments[2]?this.maxExtraEdges:arguments[2],a=this,s=arguments.length<=3||void 0===arguments[3]?this.radiiWeightPower:arguments[3],h=arguments.length<=4||void 0===arguments[4]?this._getOpacity:arguments[4],c=[],l=i(t,s),f=r(l,t),p=d(f,t,o),g=0;g<l.length&&p();g++){var v={nodeA:t[l[g][1]],nodeB:t[l[g][2]]};n(f,v)||f.push(v)}e.map(function(t){var e=Object.assign({},t),r=n(f,e);e.opacity=h.apply(a,[r,e]),u(e)&&c.push(e)});for(var y=d(c,t,o),m=0;m<f.length&&y();m++){var E=f[m];n(c,E)||(E.opacity=0,c.push(E))}return c}function c(t,e,n){return Object.create(null,{nodeA:{value:t},nodeB:{value:e},repulsionForce:{value:n},x:{get:function(){var t=this.nodeA,e=this.nodeB;return t.posX-e.posX}},y:{get:function(){var t=this.nodeA,e=this.nodeB;return t.posY-e.posY}},distSqr:{get:function(){var t=this.x,e=this.y;return t*t+e*e}},factor:{get:function(){var t=this.distSqr,e=this.repulsionForce;return e/(Math.sqrt(t)*(t+1e-5))}},deltas:{get:function(){var t=this.x,e=this.y,n=this.factor;return{dx:t*n,dy:e*n}}}})}function l(){for(var t=arguments.length<=0||void 0===arguments[0]?this.nodes:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.repulsionForce:arguments[1],n=[],r=o(t),i=0;i<2*r.length;i++)n.push(0);return r.forEach(function(t,i){for(var o=0;i>o;o++){var a=c(t,r[o],e),s=a.deltas,u=s.dx,d=s.dy;n[2*i+0]+=u,n[2*i+1]+=d,n[2*o+0]-=u,n[2*o+1]-=d}}),n}function f(t){var e={startColor:"#575E85",stopColor:"#2E3145"};return Object.assign(Object.create(null,{gradient:{get:function(){var t=this.width,e=this.height,n=this.size,r=this.graphics,i=this.startColor,o=this.stopColor,a=r.createRadialGradient(t/2,e/2,0,t/2,e/2,n/2);return a.addColorStop(0,i),a.addColorStop(1,o),a}}}),e,t)}function p(t,e){return e>t.nodeA.radius+t.nodeB.radius}function g(t){var e={width:t.canvasElem.width,height:t.canvasElem.height,size:Math.max(t.canvasElem.width,t.canvasElem.height)},n=Object.create({isEdgeVisible:p},{background:{get:function(){return f(this.data).gradient}},nodes:{get:function(){var t=this.data.size,e="129,139,197";return this.data.nodes.map(function(n){return{fill:"rgba("+e+","+n.opacity.toFixed(3)+")",arc:[n.posX*t,n.posY*t,n.radius*t,0,2*Math.PI]}})}},edges:{get:function(){var t=this,e=this.data.size,n="129,139,197";return this.data.edges.map(function(r){var i=r.nodeA,o=r.nodeB,a=i.posX-o.posX,s=i.posY-o.posY,u=Math.min(Math.min(i.opacity,o.opacity),r.opacity),d=Math.hypot(a,s);return a/=d,s/=d,t.isEdgeVisible(r,d)===!1?!1:{style:"rgba("+n+","+u.toFixed(3)+")",start:[(i.posX-a*i.radius)*e,(i.posY-s*i.radius)*e],end:[(o.posX+a*o.radius)*e,(o.posY+s*o.radius)*e]}}).filter(function(t){return t})}}});return Object.assign(n,{data:Object.assign(e,t)})}function v(){var t=arguments.length<=0||void 0===arguments[0]?this.nodes:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.edges:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.canvasElem:arguments[2],r=arguments.length<=3||void 0===arguments[3]?this.graphics:arguments[3],i=g({canvasElem:n,graphics:r,nodes:t,edges:e});return r.fillStyle=i.background,r.fillRect(0,0,i.data.width,i.data.height),i.nodes.forEach(function(t){r.fillStyle=t.fill,r.beginPath(),r.arc.apply(r,S(t.arc)),r.fill()}),r.lineWidth=i.data.size/800,i.edges.forEach(function(t){r.strokeStyle=t.style,r.beginPath(),r.moveTo.apply(r,S(t.start)),r.lineTo.apply(r,S(t.end)),r.stroke()}),i}function y(t,e){var n=arguments.length<=2||void 0===arguments[2]?this.FADE_IN_RATE:arguments[2],r=arguments.length<=3||void 0===arguments[3]?this.FADE_OUT_RATE:arguments[3];return t?Math.min(e.opacity+n,1):Math.max(e.opacity-r,0)}function m(){for(var t=0;70>t;t++)this.next();return this}function E(){var t=arguments.length<=0||void 0===arguments[0]?this.idealNumNodes:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.relWidth:arguments[1],n=this,r=arguments.length<=2||void 0===arguments[2]?this.relHeight:arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.BORDER_FADE:arguments[3],o=function(t){var n=t.posX,o=t.posY;return i>n||i>e-n||i>o||i>r-o};this.nodes.map(function(e,r){var i=!(r>=t||o(e));return e.opacity=n._getOpacity(i,e),e}),this.nodes=this.updateNodes();var a=this.getNodeDeltas();return this.nodes.map(function(t,e){return t.posX+=a[2*e+0],t.posY+=a[2*e+1],t}),this.edges=this.updateEdges(),this.redrawCanvas(),this}function w(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t=s(t),j===!0&&(t={}),t instanceof Error)throw t.message="Nayuki Canvas: "+t.message,t;var n=Object.assign({},O,e),r=Object.create(M,{idealNumNodes:{get:function(){return parseInt(this.numNodes,10)}},maxExtraEdges:{get:function(){var t=this.extraEdges,e=this.numNodes;return Math.round(parseFloat(t)/100*e)}},radiiWeightPower:{get:function(){var t=this.networkStyle,e=.5;return"mesh"===t?e=0:"hubAndSpoke"===t&&(e=1),parseFloat(e)}},repulsionForce:{get:function(){var t=this.repulsion;return isNaN(t)?t:1e-6*t},set:function(t){return this.repulsion=parseFloat(t),this.repulsion}},relWidth:{get:function(){var t=this.canvasElem,e=t.width,n=t.height;return e/Math.max(e,n)}},relHeight:{get:function(){var t=this.canvasElem,e=t.width,n=t.height;return n/Math.max(e,n)}}});return Object.assign(r,n),a()?r.graphics=t.getContext("2d"):r.graphics={},r.canvasElem=t,r.nodes=[],r.edges=[],function(){var t=void 0;r.start=function(){var e=this;return t=setInterval(function(){return e.next()},this.FRAME_INTERVAL),this},r.stop=function(){return clearInterval(t),this}}(),r}function b(t,e){return w(t,e)}var A={getRepr:function(t){return this.parents[t]!==t&&(this.parents[t]=this.getRepr(this.parents[t])),this.parents[t]},mergeSets:function(t,e){var n=this.getRepr(t),r=this.getRepr(e);if(n===r)return!1;var i=this.ranks[n]-this.ranks[r];return i>=0?(0===i&&this.ranks[n]++,this.parents[r]=n):this.parents[n]=r,!0}},x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},N=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},M={updateNodes:t,updateEdges:h,getNodeDeltas:l,redrawCanvas:v,_getOpacity:y,initialize:m,isSupported:a,next:E},O={extraEdges:20,numNodes:70,networkStyle:"balanced",repulsion:1,BORDER_FADE:-.02,FADE_IN_RATE:.06,FADE_OUT_RATE:.03,FRAME_INTERVAL:20},j="undefined"==typeof window&&"object"===("undefined"==typeof global?"undefined":x(global));"object"===("undefined"==typeof exports?"undefined":x(exports))?module.exports=b:"function"==typeof define&&"undefined"!=typeof define.amd?define(function(){return b}):window&&!window.nayukiCanvas&&(window.nayukiCanvas=b)}();